<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Crypto Dashboard</title>

<style>
  :root{
    --bg:#0b0b0c;
    --card:#151517;
    --card2:#101012;
    --text:#f4f4f5;
    --muted:rgba(244,244,245,.75);
    --line:rgba(244,244,245,.10);
    --line2:rgba(244,244,245,.08);
    --blue:#2d6cdf;
  }
  *{ box-sizing:border-box; }
  body {
    margin:0;
    font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    padding: 16px;
    background: var(--bg);
    color: var(--text);
  }

  /* âœ… h1ã‚¹ã‚¿ã‚¤ãƒ«ã¯å‰Šé™¤ */

  h2{
    margin: 0 0 10px;
    font-size: 16px;
    letter-spacing: .2px;
  }

  .container{
    padding-bottom: 96px; /* tabbaråˆ† + safe area */
  }

  .card {
    background: var(--card);
    padding: 12px;
    border-radius: 16px;
    margin-bottom: 16px;
    border: 1px solid var(--line2);
    box-shadow: 0 6px 20px rgba(0,0,0,.25);
  }

  .tv { height: 500px; }

  /* æ¨ªã‚¹ãƒ¯ã‚¤ãƒ—ï¼ˆãƒãƒ£ãƒ¼ãƒˆï¼‰ */
  .chart-slider {
    display: flex;
    overflow-x: auto;
    scroll-snap-type: x mandatory;
    -webkit-overflow-scrolling: touch;
    gap: 12px;
    padding-bottom: 2px;
  }
  .slide {
    min-width: 100%;
    scroll-snap-align: start;
  }
  .chart-slider::-webkit-scrollbar { display: none; }

  /* Buttons / textarea */
  .note-area{
    width:100%;
    border-radius:14px;
    padding:12px;
    background: var(--card2);
    color: var(--text);
    border:1px solid var(--line2);
    font-size: 14px;
    line-height: 1.55;
  }
  .btn-row{
    display:flex;
    gap:12px;
    margin-top:12px;
  }
  .btn{
    flex:1;
    padding:12px;
    border-radius:14px;
    border:1px solid transparent;
    color:white;
    cursor:pointer;
    font-weight: 700;
  }
  .btn-primary{ background: var(--blue); }
  .btn-secondary{ background:#3b3b3f; }
  .btn-tertiary{
    background: rgba(255,255,255,.03);
    border-color: var(--line2);
    color: rgba(244,244,245,.9);
  }

  /* News */
  .news-toolbar{
    display:flex;
    gap:10px;
    margin:10px 0 12px;
  }
  .news-toolbar button{
    padding:10px 12px;
    border-radius:14px;
    border:1px solid var(--line2);
    background: rgba(255,255,255,.03);
    color: rgba(244,244,245,.92);
    flex:1;
    cursor:pointer;
    font-weight: 700;
  }
  .news-status{
    font-size:12px;
    color: var(--muted);
    margin-top:8px;
  }
  .news-list{
    display:flex;
    flex-direction:column;
    gap:12px;
    margin-top:10px;
  }
  .news-item{
    border:1px solid var(--line2);
    border-radius:16px;
    padding:12px;
    background: rgba(255,255,255,.02);
  }
  .news-top{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:10px;
    margin-bottom:10px;
  }
  .badge{
    font-size:11px;
    padding:4px 10px;
    border-radius:999px;
    border:1px solid var(--line2);
    background: rgba(255,255,255,.03);
    color: rgba(244,244,245,.85);
    white-space:nowrap;
  }
  .news-title{
    font-weight:800;
    line-height:1.35;
    margin:0;
    font-size: 14px;
  }
  .news-title a{
    color:#e9f1ff;
    text-decoration:none;
  }
  .news-title a:visited{
    color:#c9d7ff;
  }
  .news-desc{
    font-size:13px;
    color: rgba(244,244,245,.86);
    line-height:1.55;
    margin-top:8px;
  }
  .news-meta{
    font-size:11px;
    color: rgba(244,244,245,.65);
    margin-top:10px;
    display:flex;
    gap:10px;
    flex-wrap:wrap;
  }
  .news-memo{
    width:100%;
    margin-top:10px;
    border-radius:14px;
    padding:10px;
    background: var(--card2);
    color: var(--text);
    border:1px solid var(--line2);
    font-size:13px;
  }
  .news-pick{
    display:flex;
    gap:8px;
    align-items:center;
    font-size:12px;
    color: rgba(244,244,245,.8);
    user-select:none;
  }
  .news-pick input{ transform: scale(1.1); }

  /* Debug */
  .debug-box{
    margin-top:10px;
    border:1px solid var(--line2);
    border-radius:16px;
    background: rgba(255,255,255,.02);
    padding:10px;
    font-size:12px;
    line-height:1.5;
    color: rgba(244,244,245,.85);
    white-space:pre-wrap;
  }
  .row{
    display:flex;
    gap:10px;
    align-items:center;
    margin-top:10px;
  }
  .row .btn{ flex:1; }

  /* Bottom Tab Bar */
  .tabbar{
    position: fixed;
    left: 0; right: 0; bottom: 0;
    z-index: 100;
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 8px;
    padding: 10px 12px calc(10px + env(safe-area-inset-bottom));
    background: rgba(11,11,12,.78);
    border-top: 1px solid var(--line);
    backdrop-filter: blur(14px);
    -webkit-backdrop-filter: blur(14px);
  }
  .tab{
    border: 1px solid var(--line2);
    background: rgba(255,255,255,.02);
    color: rgba(244,244,245,.82);
    border-radius: 16px;
    padding: 10px 8px;
    font-weight: 800;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 6px;
    cursor: pointer;
  }
  .tab span{
    font-size: 11px;
    opacity: .92;
  }
  .tab.active{
    background: rgba(45,108,223,.18);
    border-color: rgba(45,108,223,.55);
    color: rgba(244,244,245,1);
  }

  /* screen */
  .screen[hidden]{ display:none !important; }
</style>
</head>

<body>
<!-- âœ… ã“ã“ã«ã‚ã£ãŸ <h1>Crypto Dashboard</h1> ã¯å‰Šé™¤ -->

<div class="container">

  <!-- SCREEN: Chart -->
  <section class="screen" data-screen="home">
    <div class="card">
      <h2>Charts</h2>
      <div class="chart-slider">
        <div class="slide">
          <div class="card" style="margin-bottom:0;">
            <h2>BTC / JPY</h2>
            <div id="tv_btc" class="tv"></div>
          </div>
        </div>
        <div class="slide">
          <div class="card" style="margin-bottom:0;">
            <h2>ETH / JPY</h2>
            <div id="tv_eth" class="tv"></div>
          </div>
        </div>
      </div>
      <div class="news-status">å·¦å³ã‚¹ãƒ¯ã‚¤ãƒ—ã§BTC/ETHã‚’åˆ‡ã‚Šæ›¿ãˆ</div>
    </div>
  </section>

  <!-- SCREEN: Sentiment -->
  <section class="screen" data-screen="sentiment" hidden>
    <div class="card">
      <h2>Fear & Greed Index</h2>
      <div id="fear">Loading...</div>

      <div class="row">
        <button id="refreshFearBtn" class="btn btn-tertiary" type="button">å†å–å¾—</button>
        <button id="clearLogBtn" class="btn btn-tertiary" type="button">ãƒ­ã‚°æ¶ˆå»</button>
      </div>

      <div id="debugLog" class="debug-box">debug logâ€¦</div>
    </div>

    <div class="card">
      <h2>Today Signal</h2>
      <div id="signal">Loading...</div>
    </div>
  </section>

  <!-- SCREEN: News -->
  <section class="screen" data-screen="news" hidden>
    <div class="card">
      <h2>Newsï¼ˆRSS Reader / è¦ç´„è¡¨ç¤ºï¼‰</h2>

      <div class="news-toolbar">
        <button id="refreshNewsBtn" type="button">ãƒ‹ãƒ¥ãƒ¼ã‚¹æ›´æ–°</button>
        <button id="pickTopBtn" type="button">3æœ¬ãƒ”ãƒƒã‚¯ã‚¢ãƒƒãƒ—</button>
      </div>

      <div id="newsStatus" class="news-status">æœªå–å¾—</div>
      <div id="newsList" class="news-list"></div>

      <div class="news-status">
        â€»ã€Œå…¨æ–‡ã‚’èª­ã‚€ã€ã¯å¤–éƒ¨ãƒªãƒ³ã‚¯ã€‚ã‚¢ãƒ—ãƒªå†…ã¯RSSè¦ç´„ã¾ã§ã€‚
      </div>
    </div>
  </section>

  <!-- SCREEN: Note -->
  <section class="screen" data-screen="note" hidden>
    <div class="card">
      <h2>noteç”¨ãƒ¡ãƒ¢</h2>
      <textarea id="noteText" rows="12" class="note-area"></textarea>
      <div class="btn-row">
        <button id="genBtn" class="btn btn-primary" type="button">ç”Ÿæˆ</button>
        <button id="copyBtn" class="btn btn-secondary" type="button">ã‚³ãƒ”ãƒ¼</button>
      </div>
      <div id="copyStatus" class="news-status"></div>
    </div>
  </section>

</div>

<!-- Bottom Tab Bar -->
<nav class="tabbar" role="tablist" aria-label="Main">
  <button class="tab active" data-tab="home" type="button">ğŸ“ˆ<span>Chart</span></button>
  <button class="tab" data-tab="sentiment" type="button">ğŸ˜¨<span>F&G</span></button>
  <button class="tab" data-tab="news" type="button">ğŸ“°<span>News</span></button>
  <button class="tab" data-tab="note" type="button">âœï¸<span>Note</span></button>
</nav>

<!-- TradingView -->
<script src="https://s3.tradingview.com/tv.js"></script>

<script>
/* ===== ã‚°ãƒ­ãƒ¼ãƒãƒ« ===== */
window.latestFearValue = null;
window.latestFearText = null;
window.newsItems = [];

/* ===== RSSã‚½ãƒ¼ã‚¹ ===== */
const RSS_SOURCES = [
  { category: "Crypto", source: "CoinDesk",      rss: "https://www.coindesk.com/arc/outboundfeeds/rss/" },
  { category: "Crypto", source: "Cointelegraph", rss: "https://cointelegraph.com/rss" },
  { category: "Stocks", source: "CNBC",          rss: "https://www.cnbc.com/id/100003114/device/rss/rss.html" }
];

/* ===== CORSå›é¿ãƒ—ãƒ­ã‚­ã‚· ===== */
function proxiedUrl(url){
  return "https://api.allorigins.win/raw?url=" + encodeURIComponent(url);
}

/* ===== Debug log helpers ===== */
function nowStr(){
  const d = new Date();
  return `${String(d.getHours()).padStart(2,"0")}:${String(d.getMinutes()).padStart(2,"0")}:${String(d.getSeconds()).padStart(2,"0")}`;
}
function logDebug(msg){
  const el = document.getElementById("debugLog");
  if (!el) return;
  el.textContent = `[${nowStr()}] ${msg}\n` + el.textContent;
}

/* ===== Tab navigation ===== */
function showScreen(name){
  document.querySelectorAll(".screen").forEach(sec => {
    sec.hidden = (sec.dataset.screen !== name);
  });
  document.querySelectorAll(".tabbar .tab").forEach(btn => {
    btn.classList.toggle("active", btn.dataset.tab === name);
  });
  window.scrollTo({ top: 0, behavior: "instant" });
}

/* ===== Init ===== */
document.addEventListener("DOMContentLoaded", function () {

  // ã‚¿ãƒ–
  document.querySelectorAll(".tabbar .tab").forEach(btn => {
    btn.addEventListener("click", () => showScreen(btn.dataset.tab));
  });
  showScreen("home");

  // TradingViewï¼ˆChartç”»é¢ï¼‰
  new TradingView.widget({
    container_id: "tv_btc",
    symbol: "BITFLYER:BTCJPY",
    interval: "60",
    theme: "dark",
    style: "1",
    autosize: true,
    studies: ["RSI@tv-basicstudies"]
  });

  new TradingView.widget({
    container_id: "tv_eth",
    symbol: "BITFLYER:ETHJPY",
    interval: "60",
    theme: "dark",
    style: "1",
    autosize: true,
    studies: ["RSI@tv-basicstudies"]
  });

  // Fear&Greedï¼ˆSwiftã«ä¾é ¼ï¼‰
  loadFearGreed();

  // æ‰‹å‹•å†å–å¾—
  document.getElementById("refreshFearBtn").addEventListener("click", () => {
    logDebug("manual refresh button tapped");
    loadFearGreed();
  });
  document.getElementById("clearLogBtn").addEventListener("click", () => {
    document.getElementById("debugLog").textContent = "debug logâ€¦";
  });

  // note
  document.getElementById("genBtn").addEventListener("click", generateNoteText);
  document.getElementById("copyBtn").addEventListener("click", copyNoteText);

  // Newsï¼ˆRSSï¼‰
  document.getElementById("refreshNewsBtn").addEventListener("click", refreshNews);
  document.getElementById("pickTopBtn").addEventListener("click", pickTop3);
  refreshNews();

  logDebug("DOMContentLoaded done");
});

/* =========================================================
   Fear & Greedï¼ˆSwift â†’ JSï¼‰
   ========================================================= */

/** SwiftãŒå‘¼ã¶æç”»é–¢æ•° */
function renderFearGreed(value, classification) {
  logDebug(`renderFearGreed called: value=${value}, classification=${classification}`);

  const fearEl = document.getElementById("fear");
  const signalEl = document.getElementById("signal");

  const v = parseInt(value, 10);
  const text = (classification ?? "").toString();

  window.latestFearValue = Number.isFinite(v) ? v : null;
  window.latestFearText = text || null;

  if (!Number.isFinite(v) || !text) {
    fearEl.innerHTML = `<p style="color:#ff6b6b;">Fear data invalid</p>`;
    signalEl.innerHTML = `<p style="color:#ff6b6b;">Signal data invalid</p>`;
    return;
  }

  let color = "#999";
  if (v <= 25) color = "#2ecc71";
  else if (v <= 50) color = "#f1c40f";
  else if (v <= 75) color = "#e67e22";
  else color = "#e74c3c";

  fearEl.innerHTML = `
    <div style="background:${color};color:white;padding:18px;border-radius:16px;font-size:26px;font-weight:900;text-align:center;">
      ${v} - ${text}
    </div>
  `;

  let signalText = "";
  if (v <= 25) signalText = "ğŸŸ¢ Opportunityï¼ˆå¸‚å ´ã¯ææ€–å¯„ã‚Šï¼‰";
  else if (v <= 50) signalText = "ğŸŸ¡ Neutralï¼ˆæ§˜å­è¦‹ï¼‰";
  else if (v <= 75) signalText = "ğŸŸ  Greedï¼ˆéç†±æ³¨æ„ï¼‰";
  else signalText = "ğŸ”´ Riskyï¼ˆåˆ©ç¢ºè­¦æˆ’ï¼‰";

  signalEl.innerHTML = `
    <div style="background:${color};color:white;padding:18px;border-radius:16px;font-size:18px;font-weight:800;text-align:center;">
      ${signalText}
    </div>
  `;
}

/** HTMLå´ã¯Swiftã«ã€Œå–å¾—ã—ã¦ã€ã¨ä¾é ¼ã™ã‚‹ã ã‘ */
function loadFearGreed() {
  const fearEl = document.getElementById("fear");
  const signalEl = document.getElementById("signal");

  const hasBridge = !!(window.webkit && window.webkit.messageHandlers && window.webkit.messageHandlers.fearGreed);
  logDebug(`loadFearGreed() bridge=${hasBridge}`);

  fearEl.innerHTML = `<p style="color:rgba(244,244,245,.75);">bridge: ${hasBridge} / requesting...</p>`;
  signalEl.innerHTML = `<p style="color:rgba(244,244,245,.75);">waiting...</p>`;

  try {
    if (hasBridge) {
      window.webkit.messageHandlers.fearGreed.postMessage({ action: "fetch" });
      logDebug("posted message to Swift: {action:'fetch'}");
    } else {
      fearEl.innerHTML = `<p style="color:rgba(244,244,245,.75);">Fear & Greed: waiting for iOS appâ€¦</p>`;
      signalEl.innerHTML = `<p style="color:rgba(244,244,245,.75);">Signal: waiting for iOS appâ€¦</p>`;
    }
  } catch (e) {
    logDebug("postMessage error: " + String(e));
    fearEl.innerHTML = `<p style="color:#ff6b6b;">Fear load failed: ${String(e)}</p>`;
    signalEl.innerHTML = `<p style="color:#ff6b6b;">Signal load failed: ${String(e)}</p>`;
  }
}

function classifyFear(value) {
  if (value <= 25) return "ææ€–ï¼ˆãƒãƒ£ãƒ³ã‚¹å¯„ã‚Šï¼‰";
  if (value <= 50) return "ã‚„ã‚„ææ€–ã€œä¸­ç«‹";
  if (value <= 75) return "å¼·æ¬²æ°—å‘³ï¼ˆéç†±æ³¨æ„ï¼‰";
  return "å¼·æ¬²ï¼ˆè­¦æˆ’ï¼‰";
}

/* ===== News (RSS) ===== */
function cleanHtmlToText(html){
  if (!html) return "";
  return html
    .replace(/<script[\s\S]*?>[\s\S]*?<\/script>/gi, "")
    .replace(/<style[\s\S]*?>[\s\S]*?<\/style>/gi, "")
    .replace(/<\/?[^>]+>/g, " ")
    .replace(/\s+/g, " ")
    .trim();
}

async function fetchRssItems(sourceObj, limit = 6){
  const res = await fetch(proxiedUrl(sourceObj.rss), { cache: "no-store" });
  if (!res.ok) throw new Error(`${sourceObj.source} RSS HTTP ${res.status}`);
  const xmlText = await res.text();

  const parser = new DOMParser();
  const xml = parser.parseFromString(xmlText, "text/xml");

  const items = Array.from(xml.querySelectorAll("item")).slice(0, limit);

  return items.map((it, idx) => {
    const title = (it.querySelector("title")?.textContent || "").trim();
    const link  = (it.querySelector("link")?.textContent || "").trim();

    const descRaw =
      it.querySelector("description")?.textContent ||
      it.querySelector("content\\:encoded")?.textContent ||
      "";

    const desc = cleanHtmlToText(descRaw).slice(0, 240);
    const pubDate = (it.querySelector("pubDate")?.textContent || "").trim();

    return {
      id: `${sourceObj.source}-${idx}-${Date.now()}`,
      category: sourceObj.category,
      source: sourceObj.source,
      title,
      link,
      desc,
      pubDate,
      picked: false,
      memo: ""
    };
  }).filter(x => x.title && x.link);
}

async function refreshNews(){
  const statusEl = document.getElementById("newsStatus");
  const listEl = document.getElementById("newsList");

  statusEl.textContent = "ãƒ‹ãƒ¥ãƒ¼ã‚¹å–å¾—ä¸­â€¦";
  listEl.innerHTML = "";

  try {
    const all = [];
    for (const src of RSS_SOURCES) {
      const items = await fetchRssItems(src, 6);
      all.push(...items);
    }

    all.sort((a,b) => (Date.parse(b.pubDate)||0) - (Date.parse(a.pubDate)||0));

    const memoMap = new Map(window.newsItems.map(x => [x.link, { memo: x.memo, picked: x.picked }]));
    for (const it of all) {
      const old = memoMap.get(it.link);
      if (old) { it.memo = old.memo; it.picked = old.picked; }
    }

    window.newsItems = all;
    renderNews();

    const now = new Date();
    const timeStr = `${now.getHours()}:${String(now.getMinutes()).padStart(2,"0")}`;
    statusEl.textContent = `å–å¾—å®Œäº†ï¼ˆ${timeStr}ï¼‰ / ${all.length}ä»¶`;

  } catch (e) {
    statusEl.textContent = `å–å¾—å¤±æ•—ï¼š${String(e)}`;
  }
}

function renderNews(){
  const listEl = document.getElementById("newsList");
  listEl.innerHTML = "";

  const displayItems = window.newsItems.slice(0, 10);

  for (const item of displayItems) {
    const wrapper = document.createElement("div");
    wrapper.className = "news-item";

    wrapper.innerHTML = `
      <div class="news-top">
        <span class="badge">${item.category} / ${item.source}</span>
        <label class="news-pick">
          <input type="checkbox" ${item.picked ? "checked" : ""} data-link="${item.link}">
          noteã«å…¥ã‚Œã‚‹
        </label>
      </div>

      <p class="news-title">
        <a href="${item.link}" target="_blank" rel="noopener noreferrer">${item.title}</a>
      </p>

      <div class="news-desc">${item.desc ? item.desc : "ï¼ˆè¦ç´„ãªã—ï¼‰"}</div>

      <div class="news-meta">
        <span>${item.pubDate ? item.pubDate : ""}</span>
      </div>

      <textarea class="news-memo" rows="2" placeholder="ã²ã¨ã“ã¨ãƒ¡ãƒ¢ï¼ˆnoteç”¨ï¼‰" data-memo-link="${item.link}">${item.memo || ""}</textarea>
    `;

    listEl.appendChild(wrapper);
  }

  listEl.querySelectorAll('input[type="checkbox"][data-link]').forEach(cb => {
    cb.addEventListener("change", (e) => {
      const link = e.target.getAttribute("data-link");
      const it = window.newsItems.find(x => x.link === link);
      if (it) it.picked = e.target.checked;
    });
  });

  listEl.querySelectorAll('textarea[data-memo-link]').forEach(tx => {
    tx.addEventListener("input", (e) => {
      const link = e.target.getAttribute("data-memo-link");
      const it = window.newsItems.find(x => x.link === link);
      if (it) it.memo = e.target.value;
    });
  });
}

function pickTop3(){
  for (const it of window.newsItems) it.picked = false;

  const crypto = window.newsItems.filter(x => x.category === "Crypto").slice(0, 2);
  const stocks = window.newsItems.filter(x => x.category === "Stocks").slice(0, 1);

  [...crypto, ...stocks].forEach(x => x.picked = true);
  renderNews();

  document.getElementById("newsStatus").textContent = "3æœ¬ãƒ”ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã—ã¾ã—ãŸï¼ˆCrypto2 + Stocks1ï¼‰";
}

/* ===== noteç”Ÿæˆ ===== */
function generateNoteText() {
  const v = window.latestFearValue;
  const t = window.latestFearText;

  const today = new Date();
  const y = today.getFullYear();
  const m = String(today.getMonth() + 1).padStart(2, "0");
  const d = String(today.getDate()).padStart(2, "0");

  const fearLine = (v === null)
    ? "ææ€–æŒ‡æ•°ï¼šå–å¾—ã§ããš"
    : `ææ€–æŒ‡æ•°ï¼š${v}ï¼ˆ${t} / ${classifyFear(v)}ï¼‰`;

  const picked = window.newsItems.filter(x => x.picked).slice(0, 3);

  const newsLines = picked.length
    ? picked.map((n, i) => {
        const memo = n.memo ? `ï¼ˆãƒ¡ãƒ¢ï¼š${n.memo}ï¼‰` : "";
        return `${i+1}. [${n.source}] ${n.title}\n   - ${n.link}\n   - è¦ç´„: ${n.desc}${memo ? "\n   - " + memo : ""}`;
      }).join("\n\n")
    : "ï¼ˆãƒ‹ãƒ¥ãƒ¼ã‚¹æœªé¸æŠï¼šNewsã§ã€Œnoteã«å…¥ã‚Œã‚‹ã€ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã‹ã€3æœ¬ãƒ”ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’æŠ¼ã™ï¼‰";

  const text =
`ã€${y}/${m}/${d}ã€‘å¹³æ—¥ãƒ¡ãƒ¢

â–  ãƒãƒ£ãƒ¼ãƒˆæ‰€æ„Ÿï¼ˆ1æ™‚é–“è¶³ï¼‰
ãƒ»BTCï¼š
ãƒ»ETHï¼š

â–  å¸‚å ´å¿ƒç†
${fearLine}

â–  ä¸»è¦ãƒ‹ãƒ¥ãƒ¼ã‚¹ï¼ˆ3æœ¬ï¼‰
${newsLines}

â–  ä»Šæ—¥ã®è‡ªåˆ†ãƒ¡ãƒ¢
ãƒ»`;

  document.getElementById("noteText").value = text;
}

async function copyNoteText() {
  const area = document.getElementById("noteText");
  const status = document.getElementById("copyStatus");

  try {
    await navigator.clipboard.writeText(area.value);
    status.textContent = "ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ âœ…";
  } catch (e) {
    area.focus();
    area.select();
    status.textContent = "è‡ªå‹•ã‚³ãƒ”ãƒ¼ã§ããªã„å ´åˆã¯ã€é¸æŠã—ã¦æ‰‹å‹•ã‚³ãƒ”ãƒ¼ã—ã¦ã­";
  }
}
</script>

</body>
</html>
